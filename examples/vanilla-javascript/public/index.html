<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="Author" content="greg Landrum" />
    <meta charset="utf-8" />
    <link rel="icon" href="/public/favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="Web site created using create-react-app"
    />
    <link rel="apple-touch-icon" href="/public/rdkitjs_cropped-200.png" />
    <script src="https://unpkg.com/@rdkit/rdkit@2021.3.2/Code/MinimalLib/dist/RDKit_minimal.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/js/all.min.js"></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bulma@0.9.2/css/bulma.min.css"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/bulma-tooltip@3.0.2/dist/css/bulma-tooltip.min.css"
    />
    <title>RDKit.js - Vanila JS</title>
  </head>

  <script>
    onRuntimeInitialized: initRDKitModule().then(function (instance) {
      RDKitModule = instance;
      console.log("version: " + RDKitModule.version());
    });
  </script>
  <body>
    <div id="navbar">
      <nav
        class="navbar has-shadow"
        style="padding: 12px 0"
        role="navigation"
        aria-label="main navigation"
      >
        <div class="navbar-brand" style="padding: 6px">
          <a class="navbar-item" href="#/">
            <img alt="logo" src="/public/rdkitjs_cropped_200.png" />
          </a>

          <a
            role="button"
            id="burger-menu-toggle"
            class="navbar-burger"
            aria-label="menu"
            aria-expanded="false"
            data-target="navbarBasicExample"
            href="#/"
          >
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
          </a>
        </div>

        <div id="navbarBasicExample" class="navbar-menu">
          <div class="navbar-start">
            <a class="navbar-item" href="https://github.com/rdkit/rdkit">
              RDKit Home
            </a>
          </div>

          <div class="navbar-end">
            <div class="navbar-item">
              <div class="buttons">
                <a
                  data-tooltip="View Source Code"
                  class="button has-tooltip-bottom is-white is-big"
                  href="https://github.com/MichelML/rdkit-js/tree/master/examples/react-example"
                >
                  <span class="icon">
                    <i class="fab fa-github fa-2x"></i>
                  </span>
                </a>
              </div>
            </div>
            <div class="navbar-item">
              <div class="buttons">
                <a
                  data-tooltip="Go to NPM package"
                  class="button has-tooltip-bottom is-white is-big"
                  href="https://www.npmjs.com/package/@rdkit/rdkit"
                >
                  <span class="icon">
                    <i class="fab fa-npm fa-2x"></i>
                  </span>
                </a>
              </div>
            </div>
          </div>
        </div>
      </nav>
    </div>

    <div class="container is-widescreen">
      <div id="introduction" class="container">
        <section class="hero">
          <div class="hero-body">
            <p class="title">Introduction</p>
            <p class="subtitle">Welcome to RDKit.js with Vanilla JavaScript.</p>
          </div>
        </section>
      </div>

      <div id="drawing-molecules" class="container">
        <section class="hero">
          <div class="hero-body">
            <p class="title">Drawing molecules</p>
            <p class="subtitle">First we'll work with an SVG drawing:</p>
          </div>
        </section>

        <div class="columns px-5">
          <div id="example-1-container" class="column">
            <textarea
              id="example-1"
              class="textarea"
              cols="40"
              rows="5"
              wrap="off"
            >
var smiles = "CC(=O)Oc1ccccc1C(=O)O";
var mol = RDKitModule.get_mol(smiles);
var dest = document.getElementById("example-1-output");
var svg = mol.get_svg();
dest.innerHTML = "<div id='drawing'>" + svg + "</div>";
</textarea
            >
            <div>
              <input
                value="run"
                class="button mt-2"
                onclick="eval(document.getElementById('example-1').value)"
                type="button"
              />
            </div>
          </div>
          <div id="example-1-output" class="ml-6 column"></div>
        </div>
      </div>

      <section class="hero">
        <div class="hero-body">
          <p class="subtitle">
            As of v2020.09 of the RDKit we can do the same thing using the HTML5
            canvas:
          </p>
        </div>
      </section>
      <div class="columns px-5">
        <div class="column">
          <textarea
            class="textarea"
            id="example-2"
            cols="40"
            rows="5"
            wrap="off"
          >
var smiles = "CC(=O)Oc1ccccc1C(=O)O";
var mol = RDKitModule.get_mol(smiles);
var canvas = document.getElementById("canvas-2");
mol.draw_to_canvas(canvas, -1, -1);
</textarea
          >
          <div>
            <input
              class="button mt-2"
              value="run"
              onclick="eval(document.getElementById('example-2').value)"
              type="button"
            />
          </div>
        </div>
        <div id="example-2-output" class="ml-6 column">
          <canvas id="canvas-2" width="250" height="200"> </canvas>
        </div>
      </div>

      <section class="hero">
        <div class="hero-body">
          <p class="subtitle">
            We can do substructure searches and highlight the results:
          </p>
        </div>
      </section>
      <div class="columns px-5">
        <div class="column">
          <textarea
            class="textarea"
            id="example-3"
            cols="40"
            rows="5"
            wrap="off"
          >
var smiles = "CC(=O)Oc1ccccc1C(=O)O";
var mol = RDKitModule.get_mol(smiles);
var smarts = "Oc1[c,n]cccc1";
var qmol = RDKitModule.get_qmol(smarts)
var mdetails = mol.get_substruct_match(qmol)
var canvas = document.getElementById("canvas-3");
mol.draw_to_canvas_with_highlights(canvas, mdetails);
</textarea
          >
          <div>
            <input
              class="button mt-2"
              value="run"
              onclick="eval(document.getElementById('example-3').value)"
              type="button"
            />
          </div>
        </div>
        <div id="example-3-output" class="ml-6 column">
          <canvas id="canvas-3" width="250" height="200"> </canvas>
        </div>
      </div>

      <section class="hero">
        <div class="hero-body">
          <p class="subtitle">
            You can also change drawing options and do highlighting with the SVG
            renderer, but we don't show it here. You just need to replace:
          </p>
        </div>
      </section>
      <div class="px-3">
        <div class="column is-full">
          <pre>
            <code>
mol.draw_to_canvas_with_highlights(canvas, mdetails);
</code>
</pre>
        </div>
        <div class="column is-full">with</div>
        <div class="column is-full">
          <pre>
            <code>
var svg = mol.get_svg_with_highlights(mdetails);
</code>
</pre>
        </div>
      </div>

      <section class="hero">
        <div class="hero-body">
          <p class="subtitle">
            The same call can be used to control drawing options or to manually
            set the atoms/bonds which should be highlighted:
          </p>
        </div>
      </section>

      <div class="columns px-5">
        <div class="column">
          <textarea
            class="textarea"
            id="example-4"
            cols="40"
            rows="5"
            wrap="off"
          >
var smiles = "CC(=O)Oc1ccccc1C(=O)O";
var mol = RDKitModule.get_mol(smiles);
var mdetails = {};
mdetails['atoms']=[0,1,10];
mdetails['explicitMethyl'] = true;
mdetails['addAtomIndices'] = true;
mdetails['legend']='aspirin';
var canvas = document.getElementById("canvas-4");
mol.draw_to_canvas_with_highlights(canvas, JSON.stringify(mdetails));
</textarea
          >
          <div>
            <input
              class="button mt-2"
              value="run"
              onclick="eval(document.getElementById('example-4').value)"
              type="button"
            />
          </div>
        </div>
        <div id="example-4-output" class="column ml-6">
          <canvas id="canvas-4" width="250" height="200"> </canvas>
        </div>
      </div>

      <section class="hero">
        <div class="hero-body">
          <p class="subtitle">and of course we can combine the two:</p>
        </div>
      </section>

      <div class="columns px-5">
        <div class="column">
          <textarea
            class="textarea"
            id="example-5"
            cols="40"
            rows="5"
            wrap="off"
          >
var smiles = "CC(=O)Oc1ccccc1C(=O)O";
var mol = RDKitModule.get_mol(smiles);
var smarts = "O=C";
var qmol = RDKitModule.get_qmol(smarts)
var mdetails = JSON.parse(mol.get_substruct_match(qmol));
mdetails['highlightColour'] = [1,0,1];
mdetails['legend']='aspirin';
var canvas = document.getElementById("canvas-5");
mol.draw_to_canvas_with_highlights(canvas, JSON.stringify(mdetails));
</textarea
          >
          <div>
            <input
              class="button mt-2"
              value="run"
              onclick="eval(document.getElementById('example-5').value)"
              type="button"
            />
          </div>
        </div>
        <div id="example-5-output" class="col-sm-6">
          <canvas id="canvas-5" width="250" height="200"> </canvas>
        </div>
      </div>
    </div>

    The currently supported options are:
    <ol>
      <li>
        <tt>atoms</tt>,<tt>bonds</tt>: lists to specify which atoms/bonds are
        highlighted
      </li>
      <li>
        <tt>width</tt>,<tt>height</tt><tt>offsetx</tt>,<tt>offsety</tt>: used to
        draw in a subregion of a canvas. Only supported by the HTML5 canvas
        drawer.
      </li>
      <li><tt>legend</tt>: the legend drawn under the molecule</li>
      <li>
        These <tt>MolDrawOptions</tt> values:
        <tt>
          atomLabelDeuteriumTritium, dummiesAreAttachments, circleAtoms,
          continuousHighlight, fillHighlights, highlightRadius,
          flagCloseContactsDist, includeAtomTags, clearBackground,
          legendFontSize, maxFontSize, minFontSize, annotationFontScale,
          fontFile, multipleBondOffset, padding, additionalAtomLabelPadding,
          bondLineWidth, scaleBondWidth, scaleHighlightBondWidth,
          highlightBondWidthMultiplier, prepareMolsBeforeDrawing, fixedScale,
          fixedBondLength, rotate, addAtomIndices, addBondIndices,
          addStereoAnnotation, atomHighlightsAreCircles,
          centreMoleculesBeforeDrawing, explicitMethyl, includeMetadata,
          includeRadicals, highlightColour, backgroundColour, legendColour,
          symbolColour, atomLabels
        </tt>
      </li>
    </ol>

    It's often useful to generate molecule renderings where the coordinates of a
    core is constrained.
    <div class="row">
      <div class="col-sm-6">
        <textarea id="example-6" cols="40" rows="5" wrap="off">
var smiles = "c1cnc(C)nc1C(=O)O";
var mol = RDKitModule.get_mol(smiles);
var template = `
  Mrv2014 10192005332D          

  0  0  0     0  0            999 V3000
M  V30 BEGIN CTAB
M  V30 COUNTS 6 6 0 0 0
M  V30 BEGIN ATOM
M  V30 1 C -5.7917 2.5817 0 0
M  V30 2 N -7.1253 1.8117 0 0
M  V30 3 C -7.1253 0.2716 0 0
M  V30 4 C -5.7917 -0.4984 0 0
M  V30 5 C -4.458 0.2716 0 0
M  V30 6 N -4.458 1.8117 0 0
M  V30 END ATOM
M  V30 BEGIN BOND
M  V30 1 1 1 2
M  V30 2 2 2 3
M  V30 3 1 3 4
M  V30 4 2 4 5
M  V30 5 1 5 6
M  V30 6 2 1 6
M  V30 END BOND
M  V30 END CTAB
M  END
`;
var qmol = RDKitModule.get_mol(template);
mol.generate_aligned_coords(qmol,true);
var tdetails = mol.get_substruct_match(qmol);
var canvas = document.getElementById("canvas-6");
mol.draw_to_canvas_with_highlights(canvas,tdetails);
</textarea
        >
        <br /><input
          value="run"
          onclick="eval(document.getElementById('example-6').value)"
          type="button"
        />
      </div>
      <div id="example-6-output" class="col-sm-6">
        <canvas id="canvas-6" width="250" height="200"> </canvas>
      </div>
    </div>

    <script>
      const menuToggle = document.getElementById("burger-menu-toggle");
      const navBar = document.getElementById("navbarBasicExample");

      menuToggle.addEventListener("click", function () {
        menuToggle.classList.toggle("is-active");
        navBar.classList.toggle("is-active");
      });
    </script>
  </body>
</html>
